<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  

  
  
  
  
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
  
    <link rel="icon" href="/css/images/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>
</head>
<body class="home blog custom-background custom-font-enabled single-author">
  <div id="page" class="hfeed site">
      <header id="masthead" class="site-header" role="banner">
    <hgroup>
      <h1 class="site-title">
        <a href="/" title="Hexo" rel="home">Hexo</a>
      </h1>
      
        <script type="text/javascript" src="http://api.hitokoto.us/rand?encode=js&charset=utf-8"></script>
        <h2 class="site-description"><script>hitokoto();</script></h2>
      
    </hgroup>

    <nav id="site-navigation" class="main-navigation" role="navigation">
            <button class="menu-toggle">菜单</button>
            <a class="assistive-text" href="/#content" title="跳至内容">跳至内容</a><!--TODO-->
            <div class="menu-main-container">
                <ul id="menu-main" class="nav-menu">
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/">Home</a></li>
                
                    <li class="menu-item menu-item-type-post_type menu-item-object-page"><a href="/archives">Archives</a></li>
                
                </ul>
            </div>
    </nav>
</header>
      <div id="main" class="wrapper">
        <div id="primary" class="site-content"><div id="content" role="main">
  
    <article id="post-Homework/week1/Homework1" class="post-Homework/week1/Homework1 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/week1/Homework1/" data-id="cjm7eas3x0003dt4o1dnhahjr" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Homework-and-Exercise-one"><a href="#Homework-and-Exercise-one" class="headerlink" title="Homework and Exercise one"></a>Homework and Exercise one</h1><hr>
<p>1.解释游戏对象(GameObjects)和资源(Assets)的区别与联系。</p>
<ul><br><li>游戏对象：出现在游戏的所有实体都可以叫做游戏对象，它像一个容器，不同的游戏对象是不同资源的一个集合。游戏对象一般有玩家、敌人、环境等几大类。我们在游戏中所见到的具体化了的游戏对象，一般都包含在一个虚拟的父类之中。<br></li><li>资源：资源可以看作是有些对象的属性和特征，包括模型文件，图像文件，音频文件和脚本文件等。有些资源作为模板，可实例化成游戏中具体的对象。<br></li></ul><br><br><br><br>2.下载几个游戏案例,分别总结资源、对象组织的结构(指资源的目录组织结构与游戏对象树的层次结构)<br><ul><br><li>资源的目录组织结构: 文件基本包括预设文件，场景文件，贴图文件，动态资源加载文件，音效文件，脚本代码文件等，并且还可以继续往下划分。<br></li><li>游戏对象树的层次结构:  类似继承关系，一个虚拟的父类包含多个实例化之后的子类对象<br></li></ul><br><br><br><br>3.编写一个代码，使用debug语句来验证MonoBehaviour基本行为或事件触发的条件<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public class IMGUI : MonoBehaviour &#123;</span><br><span class="line">    void Awake() &#123;</span><br><span class="line">        Debug.Log (&quot;onAwake!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Start () &#123;</span><br><span class="line">        Debug.Log (&quot;onStart!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void Update () &#123;</span><br><span class="line">        Debug.Log (&quot;onUpdate!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void FixedUpdate() &#123;</span><br><span class="line">        Debug.Log (&quot;onFixedUpdate!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void LateUpdate() &#123;</span><br><span class="line">        Debug.Log (&quot;onLateUpdate!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void OnGUI() &#123;</span><br><span class="line">        Debug.Log (&quot;onGUI!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void OnDisable() &#123;</span><br><span class="line">        Debug.Log (&quot;onDisable!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    void Enable() &#123;</span><br><span class="line">        Debug.Log (&quot;Enable!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><br><br><br>4.查找脚本手册，了解GameObject，Transform，Component对象<br><br><img src="https://pmlpml.github.io/unity3d-learning/images/ch02/ch02-homework.png" alt="Table-Object"><br><br><ul><br>  <li>分别翻译官方对三个对象的描述(Description)<br><br>    <ul><br>      <li>GameObject:游戏对象是Unity中表示游戏角色，游戏道具和游戏场景的基本对象。他们自身无法完成许多功能，但是他们构成了那些给予他们实体功能的组件的容器。<br>      </li><li>Transform:转换组件决定了游戏场景中每个游戏对象的位置，旋转和缩放比例。每个游戏对象都有转换组件。<br>      </li><li>Component:组件是游戏中对象和行为的细节。它是每个游戏对象的功能部分。<br>    </li></ul>

<p>  <li>描述上图中 table对象(实体)的属性、table 的Transform的属性、 table的部件</li></p>
<pre><code>&lt;ul&gt;
  &lt;li&gt;table对象的属性:table的对象是GameObject，第一个选择框是activeSelf属性，第二个选择框是Transform属性，第三个选择框是Mesh Filter筛网过滤器属性，第四个选择框是Box Collider属性，第五个选择框是Mesh Renderer筛网渲染器属性，第六个选择框是Default-Material属性。
  &lt;li&gt;Transform的属性:包括控制位置变化的Position属性、控制旋转变化的Rotation属性、控制实体大小的Scale属性
  &lt;li&gt;table的部件:Transform、Mesh Filter、Box Collider、Mesh Renderer等
&lt;/ul&gt;
</code></pre><p>  <li>用UML图描述三者的关系</li></p>
<p>  <img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework1/2.png?raw=true" alt="UML"></p>
<p></p></li></ul><p></p>
<p>5.整理相关学习资料，编写简单代码验证以下技术的实现<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//查找子对象</span><br><span class="line">//通过对象名称查找</span><br><span class="line">public static GameObject Find(string name)</span><br><span class="line"></span><br><span class="line">//通过Tag查找单个对象</span><br><span class="line">public static GameObject FindWithTag(string tag)</span><br><span class="line"></span><br><span class="line">//通过Tag查找多个对象</span><br><span class="line">public static GameObject[] FindGameObjectsWithTag(string tag) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//添加子对象</span><br><span class="line">public static GameObect CreatePrimitive(PrimitiveTypetype)  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//遍历对象树</span><br><span class="line">foreach (Transform child in transform) &#123;  </span><br><span class="line">         Debug.Log(child.position);  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//清除所有子对象</span><br><span class="line">foreach (Transform child in transform) &#123;  </span><br><span class="line">         Destroy(child.gameObject);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<p>6.资源预设(Prefabs)与对象克隆(clone)</p>
<ul>
<li><p>预设（Prefabs）有什么好处？ </p>
<blockquote>
<ul>
<li>预设类似于一个模板，通过预设可以创建相同属性的对象，这些对象和预设关联。对预设作出的任何更改都会应用在由它所生成的所有对象上</li>
</ul>
</blockquote>
</li>
<li><p>预设与对象克隆(clone or copy or Instantiate of Unity Object)关系？</p>
<blockquote>
<ul>
<li>对象克隆，就是复制了一个原本对象的实例，这两个实例之间相互独立，之间没有影响。</li>
</ul>
</blockquote>
</li>
<li><p>制作 table 预制，写一段代码将 table 预制资源实例化成游戏对象</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class IMGUI : MonoBehaviour &#123;</span><br><span class="line"></span><br><span class="line">    void Start () &#123;</span><br><span class="line">        GameObject instance = (GameObject)Instantiate(MyTable, transform.position, transform.rotation); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<p>7.尝试解释组合模式(Composite Pattern / 一种设计模式)。使用BroadcastMessage()方法</p>
<ul>
<li><p>解释：组合模式是将对象组合成树形结构，以表示“部分整体”的层次结构，并使得用户对单个对象和组合对象的使用具有一致性。</p>
</li>
<li><p>父类对象</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class ParentBehaviourScript : MonoBehaviour &#123;</span><br><span class="line">   // Use this for initialization</span><br><span class="line">   void Start () &#123;</span><br><span class="line">       this.BroadcastMessage(&quot;Test&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>子类对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class ChildBehaviourScript : MonoBehaviour &#123;</span><br><span class="line">    void Test() &#123;</span><br><span class="line">        Debug.Log(&quot;Child Received&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/week1/Homework1/">
    <time datetime="2018-03-24T07:22:41.557Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/week1/Programming_practice1" class="post-Homework/week1/Programming_practice1 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/week1/Programming_practice1/" data-id="cjm7eas400004dt4ou6dg0nrz" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="编程实践——井子棋1-0"><a href="#编程实践——井子棋1-0" class="headerlink" title="编程实践——井子棋1.0"></a>编程实践——井子棋1.0</h1><ul><br>    <li> 游戏内容： 井字棋<br>    </li><li> 技术限制： 仅允许使用 IMGUI 构建 UI<br>    </li><li> 作业目的：<br>         <ul><br>             <li> 提升 debug 能力<br>             </li><li> 提升阅读 API 文档能力<br>         </li></ul><br></li></ul>

<hr>
<p>###1.初始化</p>
<ul>
<li>井字棋实现的基础是一个3*3的二维数组，通过点击事件，对数组中的相应位置赋值来代表示玩家的选择.首先要在游戏开始时对我们所定义的变量进行初始化</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	private int player = 1;   //记录玩家</span><br><span class="line">	private int[,] state = new int[3, 3];</span><br><span class="line">	private string reminder =  &quot;&quot;;</span><br><span class="line">	private string[] label = &#123; &quot;&quot;, &quot;O&quot;, &quot;X&quot; &#125;;  </span><br><span class="line">	private int count=0;   //确定是否被全部点击</span><br><span class="line"></span><br><span class="line">	// Use this for initialization</span><br><span class="line"></span><br><span class="line">	void reset() &#123;</span><br><span class="line">		player = 1;</span><br><span class="line">		count = 0;</span><br><span class="line">		for (int i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">			for (int j = 0; j &lt; 3; j++) &#123;</span><br><span class="line">				state [i, j] = 0;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">###2.界面渲染</span><br><span class="line"></span><br><span class="line">* 因为只能使用IMGUI构建UI，所以查阅了相关的资料。发现GUI会在每一次操作后自动更新页面。所以我们只需要做到可以保存好每一次点击之后，二维数组的状态，就可以实现有些界面的自动更新。因为GUI.Button自己会在点击之后改变返回值的真假，所以不需要像之前的js一样将click事件与函数返回进行绑定。而且我们只需要对每次点击后二维数组的状态进行判定，就可以得当前游戏的胜负情况。所以OnGUI部分的代码如下：</span><br><span class="line"></span><br><span class="line">``` C#</span><br><span class="line"></span><br><span class="line">	void OnGUI()&#123;</span><br><span class="line">		GUIStyle fontStyle = new GUIStyle ();</span><br><span class="line">		GUIStyle fontStyle1 = new GUIStyle ();</span><br><span class="line">		fontStyle.fontSize = 30;</span><br><span class="line">		fontStyle1.fontSize = 20;</span><br><span class="line">		GUI.Label (new Rect (300, 50, 100, 100), &quot;Welcome to Game&quot;, fontStyle);</span><br><span class="line">		if(GUI.Button(new Rect(300, 380, 100, 50),&quot;start&quot;))  &#123;  </span><br><span class="line">			reset();  </span><br><span class="line">		&#125; </span><br><span class="line"></span><br><span class="line">		//show result</span><br><span class="line">		int result = winCheck();</span><br><span class="line">		if (count == 0 &amp;&amp; result == 0) &#123;</span><br><span class="line">			reminder = &quot;&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		else if (result != 0 &amp;&amp; result != 3) &#123;</span><br><span class="line">			reminder = &quot;player &quot; + result + &quot; win!&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		else if(result == 3)&#123;</span><br><span class="line">			reminder = &quot;Dogfall!&quot; ;</span><br><span class="line">		&#125;</span><br><span class="line">		else&#123;</span><br><span class="line">			reminder = &quot;Continuing!&quot;;</span><br><span class="line">		&#125;</span><br><span class="line">		GUI.Label (new Rect (350, 80, 100, 50), reminder , fontStyle);</span><br><span class="line"></span><br><span class="line">		//The part of button</span><br><span class="line">		for(int i = 0; i&lt; 3; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			for(int j = 0; j &lt; 3; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				if (state[i, j] == 1)  </span><br><span class="line">				&#123;  </span><br><span class="line">					GUI.Button(new Rect(300+i * 80, 120+j * 80, 80, 80), label[1]);  </span><br><span class="line">				&#125;  </span><br><span class="line">				if (state[i, j] == 2)  </span><br><span class="line">				&#123;  </span><br><span class="line">					GUI.Button(new Rect(300+i * 80, 120+j * 80, 80, 80), label[2]);  </span><br><span class="line">				&#125;  </span><br><span class="line">				if(GUI.Button(new Rect(300+i * 80, 120+j * 80, 80, 80), &quot;&quot;)) &#123;  </span><br><span class="line">					if (result == 0)  </span><br><span class="line">					&#123;  </span><br><span class="line">						if (player == 1) state[i, j] = 1;  </span><br><span class="line">						else state[i, j] = 2;  </span><br><span class="line">						count++;  </span><br><span class="line">					    player = 3-player; </span><br><span class="line">					&#125;  </span><br><span class="line">				&#125;  </span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>###3.胜负判断</p>
<ul>
<li><p>因为井字棋胜负判定的情况很简单，即</p>
<blockquote>
<ul>
<li>有一行出现三个数相同，该数所代表的玩家胜</li>
<li>有一列出现三个数相同，该数所代表的玩家胜</li>
<li>有一斜线出现三个数相同，该数所代表的玩家胜</li>
<li>空格全部点完，仍未出现上述情况则为平局</li>
</ul>
</blockquote>
<p>所以胜负判断的函数代码如下：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">private int winCheck()  &#123;  </span><br><span class="line">	for(int i = 0; i &lt; 3; ++i)  &#123;  </span><br><span class="line">		if (state[i, 0] != 0 &amp;&amp; state[i,0]==state[i, 1] &amp;&amp; state[i, 1] == state[i, 2])  &#123;  </span><br><span class="line">			return state[i, 0];  </span><br><span class="line">		&#125;  </span><br><span class="line">	&#125;  </span><br><span class="line">	for (int i = 0; i &lt; 3; ++i)  &#123;  </span><br><span class="line">		if (state[0, i] != 0 &amp;&amp; state[0, i] == state[1, i] &amp;&amp; state[1, i] == state[2, i])  &#123;  </span><br><span class="line">			return state[0, i];  </span><br><span class="line">		&#125;  </span><br><span class="line">	&#125;  </span><br><span class="line">	if((state[1,1]!=0 &amp;&amp; state[0,0]==state[1,1] &amp;&amp; state[1,1]==state[2,2])||  </span><br><span class="line">	   (state[1,1]!=0 &amp;&amp; state[0,2]==state[1,1]&amp;&amp; state[1,1]==state[2,0]) )  &#123;  </span><br><span class="line">			return state[1, 1];  </span><br><span class="line">		&#125;  </span><br><span class="line">	if (count == 9) return 3;  </span><br><span class="line">	return 0;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>运行效果如图</li>
</ul>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework1/1.png?raw=true" alt="game_picture"></p>
<hr>
<p>####<a href="https://github.com/626zdysdq/Unity3D/tree/master/Homework1" target="_blank" rel="noopener">如果需要完整的游戏代码和演示视屏，请点击这里!</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/week1/Programming_practice1/">
    <time datetime="2018-03-24T07:22:41.557Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-index" class="post-index post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/index/" data-id="cjm7eas2w0000dt4osaxeqejk" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Welcome-to-My-Blog"><a href="#Welcome-to-My-Blog" class="headerlink" title="Welcome to My Blog"></a>Welcome to My Blog</h1><ul><br>    <li> 这里是一个代码功底很差但希望变强的小菜鸡<br>    </li><li> 也许这里刚开始会很简陋但一定会渐渐变好<br></li></ul>

<hr>
<h2 id="Contact-me"><a href="#Contact-me" class="headerlink" title="Contact me"></a>Contact me</h2><blockquote>
<ul>
<li>QQ: 923024128</li>
<li>Github: 626zdysdq</li>
</ul>
</blockquote>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/index/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/UI" class="post-Homework/UI post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/UI/" data-id="cjm7eas3s0001dt4ov2gh97ik" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="UI——关于ScollView部件的一些简单看法"><a href="#UI——关于ScollView部件的一些简单看法" class="headerlink" title="UI——关于ScollView部件的一些简单看法"></a>UI——关于ScollView部件的一些简单看法</h1><hr>
<p>这次作业主要是学习UI技术的使用，而我选择的是制作一个可展开的广告牌。虽然有师兄的博客作为参考，但是在具体实现的过程中，对ScollView部件的使用还是出现了很多的问题，所以这篇博客主要是想借这次作业，谈谈对于ScollView部件使用的一些简单看法。</p>
<p>首先，在屏幕中添加ScollView，添加后我们可以看到，在左边的部件框中会出现下图中的部件：</p>
<p><br><br><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/1.png?raw=true" alt="ScollView"></p>
<p>在屏幕中显示为</p>
<p><br><br><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/2.png?raw=true" alt="Appear"></p>
<blockquote>
<ul>
<li>其中</li>
<li>ViewPort-&gt;Content 用来放置内容的区域</li>
<li>ScrollBar Horizontal 水平方向上的滚轮</li>
<li>Scrollbar Vertical  垂直方向上的滚轮</li>
</ul>
</blockquote>
<p><br></p>
<p>接着我们首先来看Canvas，在Canvas上我主要想说的是其中Render Mode的属性，点击该属性我们可以看到</p>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/3.png?raw=true" alt="Render Mode"></p>
<blockquote>
<ul>
<li>对于两种Screen Space的选项，它会使得Canvas在布满整个相机的屏幕，因为这个功能，所以我们可以发现如果选择了这两种选项，我们是没有办法改变其Rect Transform的值的</li>
<li>如果我们希望修改Canvas的大小，我们就应该选择其World Space的选项。选择World Space后，我们就会发现Canvas的值变成了可修改的，这是我们就需要手动修改其的位置，使它可以出现在照相机中我们希望的位置</li>
</ul>
</blockquote>
<p><br></p>
<p>在Canvas之后我们来看真正的Scroll View部分，对于这一部分，我想说的是Visibility这一属性，对于一个Scroll View，我们可以通过Visibility这一属性来控制其上的两个滚轮。其中默认的选项是Auto Hide And Expand，这也是我们最常用的。它可以在我们的Content的大小超过Viewport的自动进行滚轮的扩展，当大小比较小时自动隐藏滚轮。</p>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/4.png?raw=true" alt="Scroll View"></p>
<p><br></p>
<p>接下来我们来看ViewPort中的Content，也就是第二张图中那一块灰色的区域，在这片区域就是我们用来显示广告牌内容的位置。就像之前说的，其大小如果大于父节点Viewport时，我们才会出现滚动的效果。在使用时我们会发现，如果Content不够大时会有部分的容不能显示，会被Scroll View部分挡住，所以我们在设置Content大小时，可以稍微比内容大小大一些。而且在制作广告牌时，要记得在Content下添加一个Vertical Layout Group组件。并在其中添加相应的按钮和文本框。</p>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/5.png?raw=true" alt="Content"></p>
<p><br></p>
<p>剩下的两块Scrollbar部分就是两个方向上的滚动条了。在这两个部分我们也可以去选择滚动条的颜色和样式等等。</p>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/6.png?raw=true" alt="Scrollbar"></p>
<p>最后一部分也就是EventSystem部分，这一部分为整个ScollView部件提供事件的响应机制，如果没有这个，你会发现我们在点击时不会有任何反应（亲身体验，找了好久的问题）</p>
<hr>
<p>如果在制作时我们发现滚轮不能滑动，或者点击没有反应时：<br><br></p>
<ul>
<li>可能是因为没有添加EventSystem，导致ScollView不能对我们的点击进行响应</li>
<li>如果有EventSystem，那可以检查ScollView所在的Layer是不是比较低，导致我们被其他的部件所不盖，而不能响应我们的点击时间</li>
<li>除此之外，如果是指出现滚轮不能滚动的问题，你可以检查一下是否将scorllbar与scorll Rect进行了绑定。</li>
<li>如果以上三种解决方法不能解决你的问题，那就得找大佬帮忙了</li>
</ul>
<hr>
<p>接下来我们回到广告牌的制作：</p>
<blockquote>
<ul>
<li>首先添加一个ScollView</li>
<li>接着为Content添加Vertical Layout Group组件，并在其中添加我们需要显示的按钮和文本</li>
<li>参考师兄的博客，编写实现收缩扩展的脚本</li>
<li>将脚本挂载在button上，并在其中添加对应的Text</li>
<li>按照自己的喜好，修改背景，颜色，字体大小等细节，就可以完成一个可扩展的广告牌制作了。</li>
</ul>
</blockquote>
<p>代码实现如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">public class show : MonoBehaviour &#123;  </span><br><span class="line"></span><br><span class="line">	private Button myButton;  </span><br><span class="line">	public Text text;  </span><br><span class="line">	private int frame = 20;  </span><br><span class="line"></span><br><span class="line">	// Use this for initialization  </span><br><span class="line">	void Start()  </span><br><span class="line">	&#123;  </span><br><span class="line">		Button butoon = this.gameObject.GetComponent&lt;Button&gt;();  </span><br><span class="line">		butoon.onClick.AddListener(Click);  </span><br><span class="line">	&#125;  </span><br><span class="line"></span><br><span class="line">	IEnumerator rotateIn()  </span><br><span class="line">	&#123;  </span><br><span class="line">		float rx = 0;  </span><br><span class="line">		float xy = 120;  </span><br><span class="line">		for (int i = 0; i &lt; frame; i++)  </span><br><span class="line">		&#123;  </span><br><span class="line">			rx -= 90f / frame;  </span><br><span class="line">			xy -= 120f / frame;  </span><br><span class="line">			text.transform.rotation = Quaternion.Euler(rx, 0, 0);  </span><br><span class="line">			text.rectTransform.sizeDelta = new Vector2(text.rectTransform.sizeDelta.x, xy);  </span><br><span class="line">			if (i == frame - 1)  </span><br><span class="line">			&#123;  </span><br><span class="line">				text.gameObject.SetActive(false);  </span><br><span class="line">			&#125;  </span><br><span class="line">			yield return null;  </span><br><span class="line">		&#125;  </span><br><span class="line">	&#125;  </span><br><span class="line"></span><br><span class="line">	IEnumerator rotateOut()  </span><br><span class="line">	&#123;  </span><br><span class="line">		float rx = -90;  </span><br><span class="line">		float xy = 0;  </span><br><span class="line">		for (int i = 0; i &lt; frame; i++)  </span><br><span class="line">		&#123;  </span><br><span class="line">			rx += 90f / frame;  </span><br><span class="line">			xy += 120f / frame;  </span><br><span class="line">			text.transform.rotation = Quaternion.Euler(rx, 0, 0);  </span><br><span class="line">			text.rectTransform.sizeDelta = new Vector2(text.rectTransform.sizeDelta.x, xy);  </span><br><span class="line">			if (i == 0)  </span><br><span class="line">			&#123;  </span><br><span class="line">				text.gameObject.SetActive(true);  </span><br><span class="line">			&#125;  </span><br><span class="line">			yield return null;  </span><br><span class="line">		&#125;  </span><br><span class="line">	&#125;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	void Click()  </span><br><span class="line">	&#123;  </span><br><span class="line">		if (text.gameObject.activeSelf)  </span><br><span class="line">		&#123;  </span><br><span class="line">			StartCoroutine(rotateIn());  </span><br><span class="line">		&#125;  </span><br><span class="line">		else  </span><br><span class="line">		&#123;  </span><br><span class="line">			StartCoroutine(rotateOut());  </span><br><span class="line">		&#125;  </span><br><span class="line"></span><br><span class="line">	&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>最终实现的效果如下</p>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/UI/7.png?raw=true" alt="Result"></p>
<p>源码地址：<br><a href="https://github.com/626zdysdq/Unity3D/tree/master/UI" target="_blank" rel="noopener">https://github.com/626zdysdq/Unity3D/tree/master/UI</a></p>
<p>视频链接：<br><a href="http://v.youku.com/v_show/id_XMzY0NzY4OTI2OA.html?spm=a2h0j.11185381.listitem_page1.5~A" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XMzY0NzY4OTI2OA.html?spm=a2h0j.11185381.listitem_page1.5~A</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/UI/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/Patrol" class="post-Homework/Patrol post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/Patrol/" data-id="cjm7eas3u0002dt4obgh3wyub" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Patrol——-由于之前好几次作业都没有写过博客了，所以这次对之前所学的做一个整体的总结"><a href="#Patrol——-由于之前好几次作业都没有写过博客了，所以这次对之前所学的做一个整体的总结" class="headerlink" title="Patrol—— 由于之前好几次作业都没有写过博客了，所以这次对之前所学的做一个整体的总结"></a>Patrol—— 由于之前好几次作业都没有写过博客了，所以这次对之前所学的做一个整体的总结</h1><hr>
<h3 id="游戏要求"><a href="#游戏要求" class="headerlink" title="游戏要求"></a>游戏要求</h3><blockquote>
<ul>
<li>创建一个地图和若干巡逻兵(使用动画)；</li>
<li>每个巡逻兵走一个3~5个边的凸多边型，位置数据是相对地址。即每次确定下一个目标位置，用自己当前位置为原点计算；</li>
<li>巡逻兵碰撞到障碍物，则会自动选下一个点为目标；</li>
<li>巡逻兵在设定范围内感知到玩家，会自动追击玩家；</li>
<li>失去玩家目标后，继续巡逻；</li>
<li>计分：玩家每次甩掉一个巡逻兵计一分，与巡逻兵碰撞游戏结束；</li>
</ul>
</blockquote>
<hr>
<h3 id="游戏设计"><a href="#游戏设计" class="headerlink" title="游戏设计"></a>游戏设计</h3><ul>
<li>动作管理类————上次博客时，我们是通过在每个游戏对象中添加一个Move函数，即自己控制自己的移动过程。添加动作管理类后，我们则是将游戏对象的行为单独分离了出去，剥夺了游戏对象自己调用动作的能力。通过场景控制器将游戏对象传递给动作管理器，让动作管理器去移动游戏对象。当动作很多或是需要做同样动作的游戏对象很多的时候，使用动作管理器可以让动作很容易管理，也提高了代码复用性。</li>
</ul>
<blockquote>
<ul>
<li>SSAction————所有动作的基类，受Unity引擎场景管理。格式固定，一般来说不需要改动</li>
<li>SSActionManager————动作管理器的基类，为动作基类传递游戏对象，让游戏对象完成动作或进行动作切换。该类会继承ISSActionCallback接口，以得到动作是否完成的信息</li>
<li>PatrolFollowAction、GoPatrolAction————继承动作的基类，实现追捕玩家和巡逻的动作</li>
<li>PatrolActionManager————继承动作管理器的基类，实现对巡逻兵动作的创建和销毁</li>
</ul>
</blockquote>
<p><br></p>
<ul>
<li>工厂模式————工厂模式实现了对象创建与表示的分离。利用一个List仓库来储存我们利用预制所创建的游戏对象，并在游戏运行时控制其初始位置，颜色等基本属性</li>
</ul>
<blockquote>
<ul>
<li>PatrolData————保存巡逻兵所需的属性数据，在工厂进行赋值。</li>
<li>PropFactory————控制每一个巡逻兵的出现位置和其他一些基本的属性，并在不需要用到巡逻兵时将其销毁。</li>
</ul>
</blockquote>
<p><br></p>
<ul>
<li>订阅与发布模式————即观察者模式，通过定义一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态发生变化时，会通知所有观察者对象，使它们能够自动更新自己。</li>
</ul>
<blockquote>
<ul>
<li>GameEventManager————专门发布事件的类，订阅者可以订阅该类的事件，当其他类发生改变的时候，会使用GameEventManager的方法发布消息，触发相应事件。</li>
<li>AreaCollide————将不同区域定义不同的标示，这样巡逻兵可以了解到了解到玩家是否处于自己所巡逻的区域内。</li>
<li>PatrolCollide————实现在玩家到达巡逻兵周围一定区域内是，巡逻兵去追捕玩家的事件</li>
<li>PlayerCollide————实现当玩家与该巡逻区域的巡逻兵碰撞后死亡的事件</li>
</ul>
</blockquote>
<p><br></p>
<ul>
<li>最后实现玩家动作的控制以及记分员的类</li>
</ul>
<blockquote>
<ul>
<li>UserGUI————显示玩家的界面，并向场景控制器传递消息玩家的UI信息</li>
<li>FirstSceneController————通过接受动作管理类，工厂类，发布事件的类、以及记分员类所发出的信息，对场景信息进行创建、修改和移动。</li>
</ul>
</blockquote>
<p><br></p>
<hr>
<h3 id="UML图"><a href="#UML图" class="headerlink" title="UML图"></a>UML图</h3><p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Patrols/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-12%20%E4%B8%8A%E5%8D%8811.29.24.png?raw=true" alt="UML"></p>
<hr>
<h3 id="部分关键的代码"><a href="#部分关键的代码" class="headerlink" title="部分关键的代码"></a>部分关键的代码</h3><blockquote>
<ul>
<li>巡逻兵追捕玩家的动作————巡逻兵朝着玩家的位置移动，当玩家离开了巡逻兵触发器的范围或是玩家已经不在该区域内则停止追捕的动作</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolFollowAction : SSAction</span><br><span class="line">&#123;</span><br><span class="line">    private float speed = 2f;            //跟随玩家的速度</span><br><span class="line">    private GameObject player;           //玩家</span><br><span class="line">    private PatrolData data;             //侦查兵数据</span><br><span class="line"></span><br><span class="line">    private PatrolFollowAction() &#123; &#125;</span><br><span class="line">    public static PatrolFollowAction GetSSAction(GameObject player)</span><br><span class="line">    &#123;</span><br><span class="line">        PatrolFollowAction action = CreateInstance&lt;PatrolFollowAction&gt;();</span><br><span class="line">        action.player = player;</span><br><span class="line">        return action;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public override void Update()</span><br><span class="line">    &#123;</span><br><span class="line">        if (transform.localEulerAngles.x != 0 || transform.localEulerAngles.z != 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.localEulerAngles = new Vector3(0, transform.localEulerAngles.y, 0);</span><br><span class="line">        &#125;</span><br><span class="line">        if (transform.position.y != 0)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.position = new Vector3(transform.position.x, 0, transform.position.z);</span><br><span class="line">        &#125;</span><br><span class="line">         </span><br><span class="line">        Follow();</span><br><span class="line">		//Debug.Log (&quot;A&quot;);</span><br><span class="line">        //如果侦察兵没有跟随对象，或者需要跟随的玩家不在侦查兵的区域内</span><br><span class="line">        if (!data.follow_player || data.wall_sign != data.sign)</span><br><span class="line">        &#123;</span><br><span class="line">			</span><br><span class="line">            this.destroy = true;</span><br><span class="line">            this.callback.SSActionEvent(this,1,this.gameobject);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public override void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        data = this.gameobject.GetComponent&lt;PatrolData&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    void Follow()</span><br><span class="line">    &#123;</span><br><span class="line">        transform.position = Vector3.MoveTowards(this.transform.position, player.transform.position, speed * Time.deltaTime);</span><br><span class="line">        this.transform.LookAt(player.transform.position);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>巡逻兵巡逻的动作————随机选择方向，当起始点与当前点距离大于某一个值，或者不能继续前行的时候改变方向.并随时检测在自己巡逻的区域内是否有追捕的对象，若果有则停止巡逻的动作。</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">void Gopatrol()</span><br><span class="line">    &#123;</span><br><span class="line">        if (move_sign)</span><br><span class="line">        &#123;</span><br><span class="line">            //不需要转向则设定一个目的地，按照矩形移动</span><br><span class="line">            switch (dirction)</span><br><span class="line">            &#123;</span><br><span class="line">                case Dirction.EAST:</span><br><span class="line">                    pos_x -= move_length;</span><br><span class="line">                    break;</span><br><span class="line">                case Dirction.NORTH:</span><br><span class="line">                    pos_z += move_length;</span><br><span class="line">                    break;</span><br><span class="line">                case Dirction.WEST:</span><br><span class="line">                    pos_x += move_length;</span><br><span class="line">                    break;</span><br><span class="line">                case Dirction.SOUTH:</span><br><span class="line">                    pos_z -= move_length;</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line">            move_sign = false;</span><br><span class="line">        &#125;</span><br><span class="line">        this.transform.LookAt(new Vector3(pos_x, 0, pos_z));</span><br><span class="line">        float distance = Vector3.Distance(transform.position, new Vector3(pos_x, 0, pos_z));</span><br><span class="line">        //当前位置与目的地距离浮点数的比较</span><br><span class="line">        if (distance &gt; 0.9)</span><br><span class="line">        &#123;</span><br><span class="line">            transform.position = Vector3.MoveTowards(this.transform.position, new Vector3(pos_x, 0, pos_z), move_speed * Time.deltaTime);</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            dirction = dirction + 1;</span><br><span class="line">            if(dirction &gt; Dirction.SOUTH)</span><br><span class="line">            &#123;</span><br><span class="line">                dirction = Dirction.EAST;</span><br><span class="line">            &#125;</span><br><span class="line">            move_sign = true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>创建巡逻兵的工厂</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public class PropFactory : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    private GameObject patrol = null;                              //巡逻兵</span><br><span class="line">    private List&lt;GameObject&gt; used = new List&lt;GameObject&gt;();        //正在被使用的巡逻兵</span><br><span class="line">    private Vector3[] vec = new Vector3[9];                        //保存每个巡逻兵的初始位置</span><br><span class="line">    public FirstSceneController sceneControler;                    //场景控制器</span><br><span class="line"></span><br><span class="line">    public List&lt;GameObject&gt; GetPatrols()</span><br><span class="line">    &#123;</span><br><span class="line">        int[] pos_x = &#123; -6, 4, 13 &#125;;</span><br><span class="line">        int[] pos_z = &#123; -4, 6, -13 &#125;;</span><br><span class="line">        int index = 0;</span><br><span class="line">        //生成不同的巡逻兵初始位置</span><br><span class="line">        for(int i=0;i &lt; 3;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            for(int j=0;j &lt; 3;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                vec[index] = new Vector3(pos_x[i], 0, pos_z[j]);</span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        for(int i=0; i &lt; 9; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            patrol = Instantiate(Resources.Load&lt;GameObject&gt;(&quot;Prefabs/Patrol&quot;));</span><br><span class="line">            patrol.transform.position = vec[i];</span><br><span class="line">            patrol.GetComponent&lt;PatrolData&gt;().sign = i + 1;</span><br><span class="line">            patrol.GetComponent&lt;PatrolData&gt;().start_position = vec[i];</span><br><span class="line">            used.Add(patrol);</span><br><span class="line">        &#125;   </span><br><span class="line">        return used;</span><br><span class="line">    &#125;</span><br><span class="line">		</span><br><span class="line">    public void StopPatrol()</span><br><span class="line">    &#123;</span><br><span class="line">        //改变巡逻兵的动画</span><br><span class="line">        for (int i = 0; i &lt; used.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            used[i].gameObject.GetComponent&lt;Animator&gt;().SetBool(&quot;run&quot;, false);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>检测玩家是否撞到巡逻兵————通过返回Collide的属性之来确认</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class PlayerCollide : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    void OnCollisionEnter(Collision other)</span><br><span class="line">    &#123;</span><br><span class="line">        //当玩家与侦察兵相撞</span><br><span class="line">        if (other.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            other.gameObject.GetComponent&lt;Animator&gt;().SetTrigger(&quot;death&quot;);</span><br><span class="line">            this.GetComponent&lt;Animator&gt;().SetTrigger(&quot;shoot&quot;);</span><br><span class="line">            Singleton&lt;GameEventManager&gt;.Instance.PlayerGameover();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Patrols/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-12%20%E4%B8%8B%E5%8D%887.07.43.png?raw=true" alt="PlayerCo"></p>
<p><br></p>
<blockquote>
<ul>
<li>检测玩家是否应该被追赶————通过挂载在子物体上的Collide的属性值来确定，自己是否应该向玩家方向移动</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class PatrolCollide : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    void OnTriggerEnter(Collider collider)</span><br><span class="line">    &#123;</span><br><span class="line">        if (collider.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            //玩家进入侦察兵追捕范围</span><br><span class="line">            this.gameObject.transform.parent.GetComponent&lt;PatrolData&gt;().follow_player = true;</span><br><span class="line">            this.gameObject.transform.parent.GetComponent&lt;PatrolData&gt;().player = collider.gameObject;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    void OnTriggerExit(Collider collider)</span><br><span class="line">    &#123;</span><br><span class="line">        if (collider.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            this.gameObject.transform.parent.GetComponent&lt;PatrolData&gt;().follow_player = false;</span><br><span class="line">            this.gameObject.transform.parent.GetComponent&lt;PatrolData&gt;().player = null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Patrols/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-12%20%E4%B8%8B%E5%8D%887.07.21.png?raw=true" alt="PatrolCo"></p>
<p><br></p>
<blockquote>
<ul>
<li>检测玩家是否在自己的区域内</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class AreaCollide : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public int sign = 0;</span><br><span class="line">    FirstSceneController sceneController;</span><br><span class="line">    private void Start()</span><br><span class="line">    &#123;</span><br><span class="line">        sceneController = SSDirector.GetInstance().CurrentScenceController as FirstSceneController;</span><br><span class="line">    &#125;</span><br><span class="line">    void OnTriggerEnter(Collider collider)</span><br><span class="line">    &#123;</span><br><span class="line">        //标记玩家进入自己的区域</span><br><span class="line">        if (collider.gameObject.tag == &quot;Player&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            sceneController.wall_sign = sign;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Patrols/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202018-05-12%20%E4%B8%8B%E5%8D%887.10.17.png?raw=true" alt="AEAR"></p>
<hr>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这次游戏算是涉及了之前所有学到过的模式和知识点，做起来感觉比较困难，不过对照老师所给的优秀博客的介绍思路和关键代码还是可以慢慢理解，然后实现。<br><br></p>
<p>源代码的github地址：<br><a href="https://github.com/626zdysdq/Unity3D/tree/master/Patrols" target="_blank" rel="noopener">https://github.com/626zdysdq/Unity3D/tree/master/Patrols</a></p>
<p>视频链接（如果播放不了，可以试试将清晰度改为超清）：<br><a href="http://v.youku.com/v_show/id_XMzYwMTY1Nzk5Ng==.html?spm=a2h3j.8428770.3416059.1" target="_blank" rel="noopener">http://v.youku.com/v_show/id_XMzYwMTY1Nzk5Ng==.html?spm=a2h3j.8428770.3416059.1</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/Patrol/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/week2/Homework2" class="post-Homework/week2/Homework2 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/week2/Homework2/" data-id="cjm7eas410005dt4orhx0ft3c" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Homework-and-Exercise-two"><a href="#Homework-and-Exercise-two" class="headerlink" title="Homework and Exercise two"></a>Homework and Exercise two</h1><hr>
<h3 id="简答题"><a href="#简答题" class="headerlink" title="简答题"></a>简答题</h3><p>1.游戏对象运动的本质是什么？</p>
<blockquote>
<ul>
<li>游戏对象在场景中坐标的变换</li>
</ul>
</blockquote>
<p>2.请用三种方法以上方法，实现物体的抛物线运动。</p>
<blockquote>
<ul>
<li>利用transform实现</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class test : MonoBehaviour &#123;</span><br><span class="line">	public float speed1 = 5; //水平方向的初速度</span><br><span class="line">	public float g=9.8f;</span><br><span class="line">	// Use this for initialization</span><br><span class="line"></span><br><span class="line">	public float speed = 0;</span><br><span class="line">		</span><br><span class="line">	void Start()&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	// Update is called once per frame</span><br><span class="line"></span><br><span class="line">	void Update()    &#123;</span><br><span class="line">		this.transform.position += Vector3.up * Time.deltaTime * (speed);  </span><br><span class="line">		this.transform.position += Vector3.right * Time.deltaTime * speed1;  </span><br><span class="line">		speed-=g*Time.deltaTime;  </span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>利用translate实现</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">void Update()    &#123;</span><br><span class="line">		Vector3 change = new Vector3(Time.deltaTime * speed1, Time.deltaTime * (speed), 0);  </span><br><span class="line"></span><br><span class="line">		transform.Translate(change);  </span><br><span class="line">		speed-=g*Time.deltaTime;  </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>利用Vector实现</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">void Update()    &#123;</span><br><span class="line">		Vector3 change = new Vector3(Time.deltaTime * speed1, Time.deltaTime * (speed), 0);  </span><br><span class="line">		this.transform.position += change; </span><br><span class="line">		speed-=g*Time.deltaTime;  </span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>3.写一个程序，实现一个完整的太阳系， 其他星球围绕太阳的转速必须不一样，且不在一个法平面上。</p>
<ul>
<li>首先建立一个太阳系的模型，将八大行星作为太阳的子对象，然后确定好球体的大小和位置</li>
</ul>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Sun/5.png?raw=true" alt="first"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.transform.RotateAround(origin.position, axis , speed * Time.deltaTime);</span><br></pre></td></tr></table></figure>
<ul>
<li>利用上面的transform.RatateAround函数，我们只需要设置origin的位置为太阳所在的位置，axis为Vector3.up，并且自己定义速度。再把它挂载在每一个行星上面，就可以实现行星绕太阳的公转。</li>
</ul>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Sun/3.png?raw=true" alt="second"></p>
<ul>
<li>但是这是我们发现所有行星的公转平面都在同一个法平面上，根据作业要求，我们需要改变行星绕太阳的轨道平面。这时就需要将Vector3.up改变为其他不同方向的轴。</li>
</ul>
<blockquote>
<ul>
<li>其中最简单的方法为：为每一个行星创建一个cs文件，然后将其中的axis设置为不同的值即可。</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>但是这样太过于繁琐，会有很多重复性的工作，参考老师所给的案例我们可以设置两个随机变量y和z，之后生成一个(0,y,z)的向量作为轴变量axis的值。这样我们就可以对于所有的行星使用同一个cs文件</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public Transform origin;  </span><br><span class="line">	public float speed ;  </span><br><span class="line">	float ry, rz;  </span><br><span class="line">	// Use this for initialization  </span><br><span class="line">	void Start () &#123;  </span><br><span class="line">		ry = Random.Range(5, 50);  </span><br><span class="line">		rz = Random.Range(5, 50); </span><br><span class="line">		origin.position = new Vector3 (-7, 0, 0);</span><br><span class="line">	&#125;  </span><br><span class="line"></span><br><span class="line">	// Update is called once per frame  </span><br><span class="line">	void Update () &#123;  </span><br><span class="line">		Vector3 axis = new Vector3(0, ry, rz);  </span><br><span class="line">		this.transform.RotateAround(origin.position, axis , speed * Time.deltaTime);  </span><br><span class="line">		this.transform.Rotate (Vector3.up * 50 * Time.deltaTime);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>利用上面的代码，我们就实现了行星在不同法平面围绕太阳公转，效果如图</li>
</ul>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Sun/2.png?raw=true" alt="third"></p>
<ul>
<li>下一步我们可以用同样的方法为为地球添加一个子对象月球，设置它绕着地球公转。最后我们利用Rotate函数为太阳添加自转效果就实现了一个简易的太阳系</li>
</ul>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Sun/1.png?raw=true" alt="last"></p>
<blockquote>
<ul>
<li>为了实现星空的效果，我在场景中添加了一个平台，之后利用摄像机找到合适的角度，就可以很low的模拟一下太阳系在星空中的感觉啦！</li>
</ul>
</blockquote>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/week2/Homework2/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/week2/Programming_practice2" class="post-Homework/week2/Programming_practice2 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/week2/Programming_practice2/" data-id="cjm7eas420006dt4oblqjg69p" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <p>#编程实践——Priests and Devils</p>
<hr>
<ul>
<li>阅读以下游戏脚本</li>
</ul>
<blockquote>
<p>Priests and Devils is a puzzle game in which you will help the Priests and Devils to cross the river within the time limit. There are 3 priests and 3 devils at one side of the river. They all want to get to the other side of this river, but there is only one boat and this boat can only carry two persons each time. And there must be one person steering the boat from one side to the other side. In the flash game, you can click on them to move them and click the go button to move the boat to the other direction. If the priests are out numbered by the devils on either side of the river, they get killed and the game is over. You can try it in many &gt; ways. Keep all priests alive! Good luck!</p>
</blockquote>
<ul>
<li><p>回答问题<br><ul><br>  <li>列出游戏中提及的事物（Objects）</li></ul></p>
<blockquote>
<p>Priests, devils, boat, coast, river</p>
</blockquote>
<p>  <li>用表格列出玩家动作表（规则表），注意，动作越少越好</li></p>
<p>   | 对象      | 条件  |  结果  |<br>   | ——–  | —–:  | :—-:  |<br>   | 船        | 船不为空 |   移动到对岸    |<br>   | 人物（在岸上）  | 船未满且在人物所在河岸   |   上船   |<br>   | 人物（在船上）  |  无    |  上岸  |</p>
</li>
</ul>
<p></p>
<ul>
<li>编程要求</li>
</ul>
<blockquote>
<ul>
<li>请将游戏中对象做成预制</li>
<li>在 GenGameObjects 中创建 长方形、正方形、球 及其色彩代表游戏中的对象。</li>
<li>使用 C# 集合类型 有效组织对象</li>
<li>整个游戏仅主摄像机和一个Empty对象，其他对象必须代码动态生成！！！。整个游戏不许出现Find游戏对象SendMessage这类突破程序结构的 通讯耦合语句。违背本条准则,不给分</li>
<li>请使用课件架构图编程，不接受非 MVC 结构程序</li>
<li>注意细节，例如：船未靠岸，牧师与魔鬼上下船运动中，均不能接受用户事件！</li>
</ul>
</blockquote>
<hr>
<h2 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h2><p>1.建立MVC架构</p>
<ul>
<li><p>初始时我建立的MVC模型为</p>
<blockquote>
<ul>
<li>Model: Priests, Devils, Boat, Coast.</li>
<li>View: UserGUI.</li>
<li>Controller: BoatController, CoastController, PriestController, DevilController, FirstController, Director.</li>
</ul>
</blockquote>
</li>
<li><p>但参考了老师所给的优秀博客后发现：</p>
<blockquote>
<ul>
<li>Priest和Devil虽然表示方式不同，但是所能发生的动作完全相同.</li>
<li>可以将UserGUI进行进一步的分离为对UI的动作的回应和对结果的反馈两个部分</li>
</ul>
</blockquote>
</li>
</ul>
<p>所以对自己的MVC模型进行优化，如下图：</p>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/1.png?raw=true" alt="MVC"><br><br></p>
<p>2.构建model模型</p>
<ul>
<li>对于一个Character来说，我们需要区分到底是牧师还是魔鬼，确定它所处的位置，这样我们才能确定它能够进行什么动作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class MyCharacter &#123;</span><br><span class="line">		readonly GameObject character;</span><br><span class="line">		readonly Moveable move;         //行动事件</span><br><span class="line">		readonly int characterType;	    //确定类型</span><br><span class="line">		public string Name              //确定名称</span><br><span class="line">		bool _isOnBoat;                 //确定位置</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>对于一个Boat来说，我们则需要知道它所在的位置，它载Character的位置，和载Character的属性。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Boat &#123;</span><br><span class="line">		readonly GameObject boat;</span><br><span class="line">		readonly Moveable move;              //确定行动事件</span><br><span class="line">		readonly Vector3 fromPosition        //出发点</span><br><span class="line">		readonly Vector3 toPosition          //到达点</span><br><span class="line">		readonly Vector3[] from_positions;   //出发时两个对象的位置</span><br><span class="line">		readonly Vector3[] to_positions;     //到达时两个对象的位置</span><br><span class="line">		MyCharacterController[] passenger = new MyCharacterController[2];  //保存在船上的对象</span><br><span class="line">		int  place;                          //记录船所在的位置</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>对于一个Coast来说我们需要确定它是哪一边的河岸，需要确定它的上面有多少个Character，以及它们的位置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Coast&#123;</span><br><span class="line">        readonly GameObject coast;             </span><br><span class="line">        readonly Vector3[] positions;            //保存它加载Character的位置</span><br><span class="line">        MyCharacterController[] person_number;   //保存它上面的Character</span><br><span class="line">        int to_or_from;                          //确定是哪一条河岸</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.建立各Model的Controller</p>
<ul>
<li>我在建立Model的Controller时遇到了一个问题，就是不知道应该把它对点击事件所做的回应放在Model中还是Controller。于是就又去找了网上的和老师给的代码去参考，发现大部分的代码都并没有将Model的Controller拆分出来，而是类似于C++中将对象的属性和操作方法都放在一个类中。所以我对自己实现的Model又进行了优化。</li>
</ul>
<blockquote>
<ul>
<li>最初遇到的一个巨大的问题是，我点击对象时，它并不做任何反应（明明已经添加了点击的事件）。最终只能像大佬求助，才发现我没有更新对象的状态……（简直智障）。</li>
<li>刚开始时我并没有考虑物体的运动轨迹，而是直接设定了物体的起始点和终止点，导致对象出现了直接从coast中穿过去的现象。在同学的提示下我将上船和上岸的运动分为两段，终于解决了这个鬼畜的问题。</li>
<li>我的第一个版本中对运动进行了起点上船，起点上岸，终点上船和终点上岸四种情况，在后期改进中发现，只需要两种情况的判断就可以解决移动的问题。<br><br></li>
</ul>
</blockquote>
<p>4.实现Director</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Director : System.Object &#123;</span><br><span class="line">		private static Director _instance;</span><br><span class="line">		public static Director getInstance() &#123;</span><br><span class="line">			if (_instance == null) &#123;</span><br><span class="line">				_instance = new Director ();</span><br><span class="line">			&#125;</span><br><span class="line">			return _instance;</span><br><span class="line">		&#125;</span><br><span class="line">		public SceneController currentSceneController &#123; get; set; &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>5.进行实现最高层的View</p>
<blockquote>
<ul>
<li>实现结果判定</li>
<li>实现点击事件的分类</li>
</ul>
</blockquote>
<h3 id="最终效果如图"><a href="#最终效果如图" class="headerlink" title="最终效果如图"></a>最终效果如图</h3><p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/2.png?raw=true" alt="result"></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/week2/Programming_practice2/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/week3/Homework3" class="post-Homework/week3/Homework3 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/week3/Homework3/" data-id="cjm7eas430007dt4oij3h74yx" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h1 id="Homework-and-Exercise-three"><a href="#Homework-and-Exercise-three" class="headerlink" title="Homework and Exercise three"></a>Homework and Exercise three</h1><hr>
<h2 id="Fantasy-Skybox——关于构建一块地形的简单总结"><a href="#Fantasy-Skybox——关于构建一块地形的简单总结" class="headerlink" title="Fantasy Skybox——关于构建一块地形的简单总结"></a>Fantasy Skybox——关于构建一块地形的简单总结</h2><h3 id="1-首先我从Asset-Store中下载了SkySerieFree的资源，之后导入到项目中。（建议可以先挑选部分资源导入，否则的话会超级慢）"><a href="#1-首先我从Asset-Store中下载了SkySerieFree的资源，之后导入到项目中。（建议可以先挑选部分资源导入，否则的话会超级慢）" class="headerlink" title="1.首先我从Asset Store中下载了SkySerieFree的资源，之后导入到项目中。（建议可以先挑选部分资源导入，否则的话会超级慢）"></a>1.首先我从Asset Store中下载了SkySerieFree的资源，之后导入到项目中。（建议可以先挑选部分资源导入，否则的话会超级慢）</h3><blockquote>
<ul>
<li>导入之后就会发现在Assets文件里面出现了很多的素材以及两个文件夹（如下图）</li>
</ul>
</blockquote>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/3.png?raw=true" alt="Assets"></p>
<p><br></p>
<blockquote>
<ul>
<li>之后在Camera中添加一个Skybox的Component，将我们的素材添加到里面就会出现天空的效果了</li>
</ul>
</blockquote>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/4.png?raw=true" alt="Sky"></p>
<p><br></p>
<h3 id="2-接着我们创建一个Terrain的对象开始建造地形-下图为Terrain对象的inspector"><a href="#2-接着我们创建一个Terrain的对象开始建造地形-下图为Terrain对象的inspector" class="headerlink" title="2.接着我们创建一个Terrain的对象开始建造地形(下图为Terrain对象的inspector)"></a>2.接着我们创建一个Terrain的对象开始建造地形(下图为Terrain对象的inspector)</h3><p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/5.png?raw=true" alt="menu"></p>
<p><br></p>
<blockquote>
<ul>
<li>在inspector中我们可一找到三个山形的图标，利用这三个图标就可以造出我们想要的山脉和丘陵等。</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>接着我们可以导入Enviroment的包，这个包中会有我们需要的树和草的模型</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>导入包之后，我们只需要在inspector中找到树或者花的图标，添加进去模型，就可以在我们的地形上种树和种草了(值得注意的是种草时，在窗口中只会显示一定距离以内的草，远处的草即使已经添加也不会显示，所以如果看不到自己添加的草，只需要将镜头拉近就可以了)</li>
</ul>
</blockquote>
<p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/7.png?raw=true" alt="grass"></p>
<p><br></p>
<h3 id="3-这时我们会发现因为远处的草不能显示，白色的地形会显示的很丑，这时我们就可以利用那个画笔图标来刷地，这样我们就可以构建好一个还不错的地形啦"><a href="#3-这时我们会发现因为远处的草不能显示，白色的地形会显示的很丑，这时我们就可以利用那个画笔图标来刷地，这样我们就可以构建好一个还不错的地形啦" class="headerlink" title="3.这时我们会发现因为远处的草不能显示，白色的地形会显示的很丑，这时我们就可以利用那个画笔图标来刷地，这样我们就可以构建好一个还不错的地形啦"></a>3.这时我们会发现因为远处的草不能显示，白色的地形会显示的很丑，这时我们就可以利用那个画笔图标来刷地，这样我们就可以构建好一个还不错的地形啦</h3><p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/6.png?raw=true" alt="paint"></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/week3/Homework3/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
    <article id="post-Homework/week3/Programming_practice3" class="post-Homework/week3/Programming_practice3 post type-post status-publish format-standard hentry">
    <!---->

      <header class="entry-header">
        
        <div class="comments-link">
            
            <a href="javascript:void(0);" data-url="http://yoursite.com/2018/03/24/Homework/week3/Programming_practice3/" data-id="cjm7eas440008dt4orlt8o9gs" class="leave-reply bdsharebuttonbox" data-cmd="more">Share</a>
        </div><!-- .comments-link -->
      </header><!-- .entry-header -->

    <div class="entry-content">
      
        <h2 id="牧师与魔鬼优化——动作分离版"><a href="#牧师与魔鬼优化——动作分离版" class="headerlink" title="牧师与魔鬼优化——动作分离版"></a>牧师与魔鬼优化——动作分离版</h2><hr>
<h3 id="1-改进的要求"><a href="#1-改进的要求" class="headerlink" title="1. 改进的要求"></a>1. 改进的要求</h3><ul>
<li>在上一版本的的基础上实现游戏对象的移动和游戏对象分离</li>
</ul>
<blockquote>
<ul>
<li>首先建立一个动作的管理器，通过使用场景控制器，将需要移动的对象传入动作管理器。的把每个需要移动的游戏对象的移动方法提取出来，建立一个动作管理器来管理不同的移动方法。</li>
<li>对应传入对象，实现传入对象相应的action</li>
<li>找到在上一个版本中对于船和人物的移动函数，将移动函数改为调用自己对应的action方法。</li>
</ul>
</blockquote>
<h3 id="2-改进的原因"><a href="#2-改进的原因" class="headerlink" title="2.改进的原因"></a>2.改进的原因</h3><blockquote>
<ul>
<li>当有很多不同的对象有相同的动作时，可以减少代码量，提高代码的复用性。</li>
</ul>
</blockquote>
<h3 id="3-改进的部分"><a href="#3-改进的部分" class="headerlink" title="3.改进的部分"></a>3.改进的部分</h3><blockquote>
<ul>
<li>SSAction——动作基类</li>
</ul>
</blockquote>
<p>SSAction为所有动作的基类，我们只需要其Transform属性来实现直线运动即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class SSAction : ScriptableObject</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">	public bool enable = true;</span><br><span class="line">	public bool destroy = false;</span><br><span class="line"></span><br><span class="line">	public GameObject gameObject;    //创建动作对象</span><br><span class="line">	public Transform transform;</span><br><span class="line">	public ISSActionCallback callback;   //动作完成后的反馈</span><br><span class="line"></span><br><span class="line">	public virtual void Start()</span><br><span class="line">	&#123;</span><br><span class="line">		throw new System.NotImplementedException();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public virtual void Update()</span><br><span class="line">	&#123;</span><br><span class="line">		throw new System.NotImplementedException();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>MoveToAction——基础动作类</li>
</ul>
</blockquote>
<p>构造我们需要的直线运动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class MoveToAction : SSAction</span><br><span class="line">&#123;</span><br><span class="line">	public Vector3 target;</span><br><span class="line">	public float speed;</span><br><span class="line"></span><br><span class="line">	private MoveToAction() &#123; &#125;</span><br><span class="line">	public static MoveToAction getAction(Vector3 target, float speed)</span><br><span class="line">	&#123;</span><br><span class="line">		MoveToAction action = ScriptableObject.CreateInstance&lt;MoveToAction&gt;();</span><br><span class="line">		action.target = target;</span><br><span class="line">		action.speed = speed;</span><br><span class="line">		return action;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public override void Update()</span><br><span class="line">	&#123;</span><br><span class="line">		this.transform.position = Vector3.MoveTowards(this.transform.position, target, speed * Time.deltaTime);</span><br><span class="line">		if (this.transform.position == target)</span><br><span class="line">		&#123;</span><br><span class="line">			this.destroy = true;</span><br><span class="line">			this.callback.actionDone(this);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public override void Start()</span><br><span class="line">	&#123;</span><br><span class="line">		//</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>SequenceAction——组合动作类</li>
</ul>
</blockquote>
<p>在这次的游戏中，我们只需要将上岸和上船两个动作看作是两个不同方向的直线运动的组合，按照顺序将其加入动作队列，然后执行，执行完毕后，清空队列。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">public class SequenceAction : SSAction, ISSActionCallback</span><br><span class="line">&#123;</span><br><span class="line">	public List&lt;SSAction&gt; sequence;</span><br><span class="line">	public int repeat = 1;</span><br><span class="line">	public int currentActionIndex = 0;</span><br><span class="line"></span><br><span class="line">	public static SequenceAction getAction(int repeat, int currentActionIndex, List&lt;SSAction&gt; sequence)</span><br><span class="line">	&#123;</span><br><span class="line">		SequenceAction action = ScriptableObject.CreateInstance&lt;SequenceAction&gt;();</span><br><span class="line">		action.sequence = sequence;</span><br><span class="line">		action.repeat = repeat;</span><br><span class="line">		action.currentActionIndex = currentActionIndex;</span><br><span class="line">		return action;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public override void Update()</span><br><span class="line">	&#123;</span><br><span class="line">		if (sequence.Count == 0) return;</span><br><span class="line">		if (currentActionIndex &lt; sequence.Count)</span><br><span class="line">		&#123;</span><br><span class="line">			sequence[currentActionIndex].Update();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void actionDone(SSAction source)</span><br><span class="line">	&#123;</span><br><span class="line">		source.destroy = false;</span><br><span class="line">		this.currentActionIndex++;</span><br><span class="line">		if (this.currentActionIndex &gt;= sequence.Count)</span><br><span class="line">		&#123;</span><br><span class="line">			this.currentActionIndex = 0;</span><br><span class="line">			if (repeat &gt; 0) repeat--;</span><br><span class="line">			if (repeat == 0)</span><br><span class="line">			&#123;</span><br><span class="line">				this.destroy = true;</span><br><span class="line">				this.callback.actionDone(this);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public override void Start()</span><br><span class="line">	&#123;</span><br><span class="line">		foreach (SSAction action in sequence)</span><br><span class="line">		&#123;</span><br><span class="line">			action.gameObject = this.gameObject;</span><br><span class="line">			action.transform = this.transform;</span><br><span class="line">			action.callback = this;</span><br><span class="line">			action.Start();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	void OnDestroy()</span><br><span class="line">	&#123;</span><br><span class="line">		foreach (SSAction action in sequence)</span><br><span class="line">		&#123;</span><br><span class="line">			DestroyObject(action);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>ISSActionCallback——动作管理的接口</li>
</ul>
</blockquote>
<p>实现动作和动作管理者之间的联系，使得动作管理类可以为动作的实现传递信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface ISSActionCallback</span><br><span class="line">&#123;</span><br><span class="line">	void actionDone(SSAction source);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>SSActionManager——动作管理的基类</li>
</ul>
</blockquote>
<p>对动作进行管理，为其传递游戏对象，以实现我们所需要的动作以及动作之间的切换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public class SSActionManager : MonoBehaviour, ISSActionCallback</span><br><span class="line">&#123;</span><br><span class="line">	private Dictionary&lt;int, SSAction&gt; actions = new Dictionary&lt;int, SSAction&gt;();</span><br><span class="line">	private List&lt;SSAction&gt; waitingToAdd = new List&lt;SSAction&gt;();</span><br><span class="line">	private List&lt;int&gt; watingToDelete = new List&lt;int&gt;();</span><br><span class="line"></span><br><span class="line">	protected void Update()</span><br><span class="line">	&#123;</span><br><span class="line">		foreach (SSAction ac in waitingToAdd)</span><br><span class="line">		&#123;</span><br><span class="line">			actions[ac.GetInstanceID()] = ac;</span><br><span class="line">		&#125;</span><br><span class="line">		waitingToAdd.Clear();</span><br><span class="line"></span><br><span class="line">		foreach (KeyValuePair&lt;int, SSAction&gt; kv in actions)</span><br><span class="line">		&#123;</span><br><span class="line">			SSAction ac = kv.Value;</span><br><span class="line">			if (ac.destroy)</span><br><span class="line">			&#123;</span><br><span class="line">				watingToDelete.Add(ac.GetInstanceID());</span><br><span class="line">			&#125;</span><br><span class="line">			else if (ac.enable)</span><br><span class="line">			&#123;</span><br><span class="line">				ac.Update();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		foreach (int key in watingToDelete)</span><br><span class="line">		&#123;</span><br><span class="line">			SSAction ac = actions[key];</span><br><span class="line">			actions.Remove(key);</span><br><span class="line">			DestroyObject(ac);</span><br><span class="line">		&#125;</span><br><span class="line">		watingToDelete.Clear();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void addAction(GameObject gameObject, SSAction action, ISSActionCallback whoToNotify)</span><br><span class="line">	&#123;</span><br><span class="line">		action.gameObject = gameObject;</span><br><span class="line">		action.transform = gameObject.transform;</span><br><span class="line">		action.callback = whoToNotify;</span><br><span class="line">		waitingToAdd.Add(action);</span><br><span class="line">		action.Start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void actionDone(SSAction source)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<blockquote>
<ul>
<li>ActionManager——动作管理</li>
</ul>
</blockquote>
<p>管理动作，对动作的执行进行调度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class ActionManager : SSActionManager</span><br><span class="line">&#123;</span><br><span class="line">	public void moveBoat(BoatController boat)</span><br><span class="line">	&#123;</span><br><span class="line">		MoveToAction action = MoveToAction.getAction(boat.getDestination(), boat.movingSpeed);</span><br><span class="line">		this.addAction(boat.getGameobj(), action, this);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	public void moveCharacter(MyCharacterController characterCtrl, Vector3 destination)</span><br><span class="line">	&#123;</span><br><span class="line">		Vector3 currentPos = characterCtrl.getPosition();</span><br><span class="line">		Vector3 middlePos = currentPos;</span><br><span class="line">		if (destination.y &gt; currentPos.y)</span><br><span class="line">		&#123;</span><br><span class="line">			middlePos.y = destination.y;</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			middlePos.x = destination.x;</span><br><span class="line">		&#125;</span><br><span class="line">		SSAction action1 = MoveToAction.getAction(middlePos, characterCtrl.movingSpeed);</span><br><span class="line">		SSAction action2 = MoveToAction.getAction(destination, characterCtrl.movingSpeed);</span><br><span class="line">		SSAction seqAction = SequenceAction.getAction(1, 0, new List&lt;SSAction&gt; &#123; action1, action2 &#125;);</span><br><span class="line">		this.addAction(characterCtrl.getGameobj(), seqAction, this);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><br></p>
<h3 id="4-游戏截图"><a href="#4-游戏截图" class="headerlink" title="4.游戏截图"></a>4.游戏截图</h3><p><img src="https://github.com/626zdysdq/Unity3D/blob/master/Homework3/2.png?raw=true" alt="a"></p>
<h3 id="5-资源链接"><a href="#5-资源链接" class="headerlink" title="5.资源链接"></a>5.资源链接</h3><p><a href="https://github.com/626zdysdq/Unity3D/tree/master/Homework3" target="_blank" rel="noopener">源代码在这里哦</a></p>

      
    </div><!-- .entry-content -->

    <footer class="entry-meta">
    <a href="/2018/03/24/Homework/week3/Programming_practice3/">
    <time datetime="2018-03-24T07:15:22.258Z" class="entry-date">
        2018-03-24
    </time>
</a>
    
    
    </footer>
</article>






  
  

</div></div>
        <div id="secondary" class="widget-area" role="complementary">
  
    <aside id="search" class="widget widget_search"><form role="search" method="get" accept-charset="utf-8" id="searchform" class="searchform" action="//google.com/search">
    <div>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="搜索" />
    </div>
</form></aside>
  
    
  
    
  
    
  <aside class="widget">
    <h3 class="widget-title">Recents</h3>
    <div class="widget-content">
      <ul>
        
          <li>
            <a href="/2018/03/24/Homework/week1/Homework1/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/03/24/Homework/week1/Programming_practice1/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/03/24/index/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/03/24/Homework/UI/">(no title)</a>
          </li>
        
          <li>
            <a href="/2018/03/24/Homework/Patrol/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </aside>

  
    
  
    
  
</div>
      </div>
      <footer id="colophon" role="contentinfo">
    <p>&copy; 2018 John Doe
    All rights reserved.</p>
    <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</footer>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

<script src="/js/jquery-2.0.3.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

<script src="/js/navigation.js"></script>

<div id="bg"></div>

  </div>
</body>
</html>